<!DOCTYPE html> <html lang="th"> <head>
    <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>‡∏Ñ‡∏•‡∏±‡∏á‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ - BookVerse</title> <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <nav class="navbar navbar-expand-lg navbar-light bg-white sticky-top shadow-sm">
        <div class="container">
            <a class="navbar-brand fw-bold text-success fs-3" href="index.html">BookVerse</a>
            
            <div class="d-flex">
                <a href="index.html" class="btn btn-outline-secondary rounded-pill btn-sm">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
            </div>
        </div>
    </nav>

    <div class="container py-5">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="fw-bold text-success"><i class="bi bi-compass"></i> Discover Books</h2>
            <button onclick="loadBooks()" class="btn btn-sm btn-outline-success rounded-pill">Refresh</button>
        </div>
        
        <div class="row g-4" id="book-container">
            
            <div class="text-center py-5">
                <div class="spinner-border text-success" role="status"></div>
                <p class="mt-2 text-secondary">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏à‡∏≤‡∏Å‡∏ä‡∏±‡πâ‡∏ô‡∏ß‡∏≤‡∏á...</p>
            </div>

        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
        // --------------------------------------------------------
        // üîß ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ (Configuration)
        // --------------------------------------------------------
        
        // ‚ö†Ô∏è ‡∏ß‡∏≤‡∏á URL ‡∏Ç‡∏≠‡∏á Google Apps Script ‡∏ó‡∏µ‡πà Deploy ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ ‚ö†Ô∏è
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxelv7qk0JyfK-EBEVZonFi2ISt2PmnFtr6oEhde-Fx3pvTRTWUL4_rJL4kRUgm8faQyg/exec';

        // --------------------------------------------------------

        // ‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö (Window Load)
        window.onload = loadBooks;

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ (Fetch Data)
        function loadBooks() {
            const container = document.getElementById('book-container');
            
            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Google Script ‡∏î‡πâ‡∏ß‡∏¢‡∏ß‡∏¥‡∏ò‡∏µ GET
            // ‡∏™‡πà‡∏á parameter action=getBooks ‡πÑ‡∏õ‡∏ö‡∏≠‡∏Å server ‡∏ß‡πà‡∏≤‡∏Ç‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠
            fetch(SCRIPT_URL + '?action=getBooks')
                .then(response => response.json()) // ‡πÅ‡∏õ‡∏•‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏õ‡πá‡∏ô JSON (Object)
                .then(books => {
                    // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå Loading Spinner ‡∏≠‡∏≠‡∏Å‡∏Å‡πà‡∏≠‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÉ‡∏™‡πà‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏à‡∏£‡∏¥‡∏á
                    container.innerHTML = '';

                    // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏™‡πà‡∏á‡∏°‡∏≤‡πÑ‡∏´‡∏°
                    if (books.length === 0) {
                        container.innerHTML = '<div class="col-12 text-center">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</div>';
                        return; // ‡∏à‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô
                    }

                    // ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏ó‡∏µ‡∏•‡∏∞‡πÄ‡∏•‡πà‡∏° (Loop)
                    books.forEach(book => {
                        // ‡πÉ‡∏ä‡πâ Template Literal (Backticks `) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á HTML ‡∏Å‡∏≤‡∏£‡πå‡∏î
                        // ‡πÅ‡∏•‡∏∞‡πÅ‡∏ó‡∏£‡∏Å‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ ${...} ‡∏•‡∏á‡πÑ‡∏õ‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î
                        const cardHTML = `
                            <div class="col-md-3 col-6">
                                <div class="card h-100 border-0 shadow-sm card-hover">
                                    <div style="height: 250px; overflow: hidden;" class="card-img-top rounded-top bg-light position-relative">
                                        <img src="${book.image}" class="w-100 h-100 object-fit-cover" alt="${book.title}" onerror="this.src='https://placehold.co/400x600?text=No+Image'">
                                    </div>
                                    
                                    <div class="card-body">
                                        <h5 class="card-title fs-6 fw-bold text-truncate">${book.title}</h5>
                                        <p class="card-text text-secondary small mb-1">‡πÇ‡∏î‡∏¢ ${book.author}</p>
                                        
                                        <div class="d-flex justify-content-between align-items-center mt-2">
                                            <span class="badge bg-success-subtle text-success">${book.category}</span>
                                            <small class="fw-bold text-success">‡∏ø${book.price}</small>
                                        </div>
                                    </div>
                                    
                                    <div class="card-footer bg-white border-0 pb-3">
                                        <button class="btn btn-outline-success btn-sm w-100 rounded-pill">‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏•‡∏¢</button>
                                    </div>
                                </div>
                            </div>
                        `;
                        // ‡πÄ‡∏≠‡∏≤ HTML ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏õ‡∏ï‡πà‡∏≠‡∏ó‡πâ‡∏≤‡∏¢‡πÉ‡∏ô container
                        container.innerHTML += cardHTML;
                    });
                })
                .catch(error => {
                    // ‡∏Å‡∏£‡∏ì‡∏µ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ (Network Error ‡∏´‡∏£‡∏∑‡∏≠ Script ‡∏ú‡∏¥‡∏î)
                    console.error('Error:', error);
                    container.innerHTML = `<div class="col-12 text-center text-danger">‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•<br>${error}</div>`;
                });
        }
    </script>
</body>
</html>